<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Creates all required transaction handlers for a given context and transaction type."><title>create_txhandlers in clementine_core::builder::transaction::creator - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="clementine_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../clementine_core/index.html">clementine_<wbr>core</a><span class="version">0.4.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">create_<wbr>txhandlers</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#returns" title="Returns">Returns</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In clementine_<wbr>core::<wbr>builder::<wbr>transaction::<wbr>creator</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">clementine_core</a>::<wbr><a href="../../index.html">builder</a>::<wbr><a href="../index.html">transaction</a>::<wbr><a href="index.html">creator</a></div><h1>Function <span class="fn">create_txhandlers</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/clementine_core/builder/transaction/creator.rs.html#602-1024">Source</a> </span></div><pre class="rust item-decl"><code>pub async fn create_txhandlers(
    transaction_type: <a class="enum" href="../enum.TransactionType.html" title="enum clementine_core::builder::transaction::TransactionType">TransactionType</a>,
    context: <a class="struct" href="../struct.ContractContext.html" title="struct clementine_core::builder::transaction::ContractContext">ContractContext</a>,
    txhandler_cache: &amp;mut <a class="struct" href="../struct.TxHandlerCache.html" title="struct clementine_core::builder::transaction::TxHandlerCache">TxHandlerCache</a>,
    db_cache: &amp;mut <a class="struct" href="../struct.ReimburseDbCache.html" title="struct clementine_core::builder::transaction::ReimburseDbCache">ReimburseDbCache</a>&lt;'_, '_&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.88.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.88.0/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;<a class="enum" href="../enum.TransactionType.html" title="enum clementine_core::builder::transaction::TransactionType">TransactionType</a>, <a class="struct" href="../struct.TxHandler.html" title="struct clementine_core::builder::transaction::TxHandler">TxHandler</a>&gt;, <a class="enum" href="../../../errors/enum.BridgeError.html" title="enum clementine_core::errors::BridgeError">BridgeError</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Creates all required transaction handlers for a given context and transaction type.</p>
<p>This function builds and caches all necessary transaction handlers for the specified transaction type, operator, round, and deposit context.
It handles the full flow of collateral, kickoff, challenge, reimbursement, and assertion transactions, including round management and challenge handling.
Function returns early if the needed txhandler is already created.
Currently there are 3 kinds of specific transaction types that can be given as parameter that change the logic flow</p>
<ul>
<li>AllNeededForDeposit: Creates all transactions, including the round tx’s and deposit related tx’s.</li>
<li>Round related tx’s (Round, ReadyToReimburse, UnspentKickoff): Creates only round related tx’s and returns early.</li>
<li>MiniAssert and LatestBlockhash: These tx’s are created to commit data in their witness using winternitz signatures. To enable signing these transactions, the kickoff transaction (where the input of MiniAssert and LatestBlockhash resides) needs to be created with the full list of scripts in its TxHandler data. This may take some time especially for a deposit where thousands of kickoff tx’s are created. That’s why if MiniAssert or LatestBlockhash is not requested, these scripts are not created and just the merkle root hash of these scripts is used to create the kickoff tx. But if these tx’s are requested, the full list of scripts is needed to create the kickoff tx, to enable signing these transactions with winternitz signatures.</li>
</ul>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h2>
<ul>
<li><code>transaction_type</code> - The type of transaction(s) to create.</li>
<li><code>context</code> - The contract context (operator, round, deposit, etc).</li>
<li><code>txhandler_cache</code> - Cache for storing/retrieving intermediate txhandlers.</li>
<li><code>db_cache</code> - Database-backed cache for retrieving protocol data.</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<p>A map of <a href="../enum.TransactionType.html" title="enum clementine_core::builder::transaction::TransactionType"><code>TransactionType</code></a> to <a href="../struct.TxHandler.html" title="struct clementine_core::builder::transaction::TxHandler"><code>TxHandler</code></a> for all constructed transactions, or a <a href="../../../errors/enum.BridgeError.html" title="enum clementine_core::errors::BridgeError"><code>BridgeError</code></a> if construction fails.</p>
</div></details></section></div></main></body></html>