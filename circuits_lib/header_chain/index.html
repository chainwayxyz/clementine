<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Circuits-lib - Header Chain Circuit"><title>circuits_lib::header_chain - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="circuits_lib" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../circuits_lib/index.html">circuits_<wbr>lib</a><span class="version">0.4.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module header_<wbr>chain</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#circuits-lib---header-chain-circuit" title="Circuits-lib - Header Chain Circuit">Circuits-lib - Header Chain Circuit</a></li></ul><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate circuits_<wbr>lib</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">circuits_lib</a></div><h1>Module <span>header_chain</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/circuits_lib/header_chain/mod.rs.html#1-1023">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="circuits-lib---header-chain-circuit"><a class="doc-anchor" href="#circuits-lib---header-chain-circuit">Â§</a>Circuits-lib - Header Chain Circuit</h2>
<p>This module contains the implementation of the header chain circuit, which is basically
the Bitcoin header chain verification logic.</p>
<p>Implementation of this module is inspired by the Bitcoin Core source code and from here:
https://github.com/ZeroSync/header_chain/tree/master/program/src/block_header.</p>
<p><strong>âš ï¸ Warning:</strong> This implementation is not a word-to-word translation of the Bitcoin Core source code.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="mod" href="mmr_guest/index.html" title="mod circuits_lib::header_chain::mmr_guest">mmr_<wbr>guest</a></dt><dd>MMR Guest - Merkle Mountain Range for zkVM</dd><dt><a class="mod" href="mmr_native/index.html" title="mod circuits_lib::header_chain::mmr_native">mmr_<wbr>native</a></dt><dd>MMR Native - Merkle Mountain Range for Native Environments</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BlockHeaderCircuitOutput.html" title="struct circuits_lib::header_chain::BlockHeaderCircuitOutput">Block<wbr>Header<wbr>Circuit<wbr>Output</a></dt><dd>Circuit output containing the updated chain state and metadata.</dd><dt><a class="struct" href="struct.ChainState.html" title="struct circuits_lib::header_chain::ChainState">Chain<wbr>State</a></dt><dd>Verifiable state of the Bitcoin header chain.</dd><dt><a class="struct" href="struct.CircuitBlockHeader.html" title="struct circuits_lib::header_chain::CircuitBlockHeader">Circuit<wbr>Block<wbr>Header</a></dt><dd>Serializable representation of a Bitcoin block header.</dd><dt><a class="struct" href="struct.HeaderChainCircuitInput.html" title="struct circuits_lib::header_chain::HeaderChainCircuitInput">Header<wbr>Chain<wbr>Circuit<wbr>Input</a></dt><dd>The input of the header chain circuit.
It contains the method ID, the previous proof (either a genesis block or a previous proof), and the block headers to be processed.
Method ID is used to identify the circuit and is expected to be the same as the one used in the previous proof.</dd><dt><a class="struct" href="struct.NetworkConstants.html" title="struct circuits_lib::header_chain::NetworkConstants">Network<wbr>Constants</a></dt><dd>Network configuration holder for Bitcoin-specific constants.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.HeaderChainPrevProofType.html" title="enum circuits_lib::header_chain::HeaderChainPrevProofType">Header<wbr>Chain<wbr>Prev<wbr>Proof<wbr>Type</a></dt><dd>Previous proof type - either genesis state or previous circuit output.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.BLOCKS_PER_EPOCH.html" title="constant circuits_lib::header_chain::BLOCKS_PER_EPOCH">BLOCKS_<wbr>PER_<wbr>EPOCH</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Number of blocks in a difficulty adjustment epoch.</dd><dt><a class="constant" href="constant.EXPECTED_EPOCH_TIMESPAN.html" title="constant circuits_lib::header_chain::EXPECTED_EPOCH_TIMESPAN">EXPECTED_<wbr>EPOCH_<wbr>TIMESPAN</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Expected duration of a difficulty adjustment epoch in seconds.</dd><dt><a class="constant" href="constant.IS_REGTEST.html" title="constant circuits_lib::header_chain::IS_REGTEST">IS_<wbr>REGTEST</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dt><a class="constant" href="constant.IS_TESTNET4.html" title="constant circuits_lib::header_chain::IS_TESTNET4">IS_<wbr>TESTNE<wbr>T4</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dt><a class="constant" href="constant.MINIMUM_WORK_TESTNET.html" title="constant circuits_lib::header_chain::MINIMUM_WORK_TESTNET">MINIMUM_<wbr>WORK_<wbr>TESTNET</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dt><a class="constant" href="constant.NETWORK_CONSTANTS.html" title="constant circuits_lib::header_chain::NETWORK_CONSTANTS">NETWORK_<wbr>CONSTANTS</a></dt><dd>Network constants for the Bitcoin network configuration.</dd><dt><a class="constant" href="constant.NETWORK_TYPE.html" title="constant circuits_lib::header_chain::NETWORK_TYPE">NETWORK_<wbr>TYPE</a></dt></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.bits_to_target.html" title="fn circuits_lib::header_chain::bits_to_target">bits_<wbr>to_<wbr>target</a></dt><dd>Converts compact target representation (bits) to full 32-byte target.</dd><dt><a class="fn" href="fn.calculate_new_difficulty.html" title="fn circuits_lib::header_chain::calculate_new_difficulty">calculate_<wbr>new_<wbr>difficulty</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Calculates the new difficulty target after a difficulty adjustment epoch.</dd><dt><a class="fn" href="fn.calculate_work.html" title="fn circuits_lib::header_chain::calculate_work">calculate_<wbr>work</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Calculates the amount of work represented by a difficulty target.</dd><dt><a class="fn" href="fn.check_hash_valid.html" title="fn circuits_lib::header_chain::check_hash_valid">check_<wbr>hash_<wbr>valid</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Validates that a block hash meets the proof-of-work requirement.</dd><dt><a class="fn" href="fn.header_chain_circuit.html" title="fn circuits_lib::header_chain::header_chain_circuit">header_<wbr>chain_<wbr>circuit</a></dt><dd>The main entry point of the header chain circuit.</dd><dt><a class="fn" href="fn.median.html" title="fn circuits_lib::header_chain::median">median</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Calculates the median of 11 timestamps.</dd><dt><a class="fn" href="fn.target_to_bits.html" title="fn circuits_lib::header_chain::target_to_bits">target_<wbr>to_<wbr>bits</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Converts a full 32-byte target to compact representation (bits).</dd><dt><a class="fn" href="fn.validate_timestamp.html" title="fn circuits_lib::header_chain::validate_timestamp">validate_<wbr>timestamp</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </dt><dd>Validates a block timestamp against the median time past rule.</dd></dl></section></div></main></body></html>